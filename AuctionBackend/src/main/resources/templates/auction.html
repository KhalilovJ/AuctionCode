<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <link rel="stylesheet" th:href="@{/style/auction.css}">
  <title>Auction</title>
</head>
<body>

<header class="d-flex flex-wrap bg-primary justify-content-center w-100 py-3 mb-4 border-bottom shadow">
  <a href="/home" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none" style="margin-left: 15px;">
    <img src="https://i.pinimg.com/originals/af/1d/25/af1d25b221d4c5a7231225f4b1566d1c.png" height="55" class="d-inline-block align-top" alt="">
    <span class="fs-4 text-light">Auctioneer</span>
  </a>

  <ul class="nav nav-pills" style="margin-right: 30px;">
    <li class="nav-item"><a href="#" class="nav-link text-light" aria-current="page">HOME</a></li>
    <li class="nav-item"><a href="#" class="nav-link text-white">PROFILE</a></li>
  </ul>
</header>


<div class="h-100" id="remaining" style="min-height: max-content;">


  <div class="row d-flex justify-content-evenly h-100 d-inline-block" style="height: 100px;">

    <div class="col-md-3 mx-2 d-flex align-items-stretch align-content-center align-items-center bg-white border card text-center shadow"> <!-- Column 1-->



      <div th:if="${auction != null}" class="d-flex justify-content-center my-auto">

        <div class="align-self-center text-left">

          <br>

          <div class="d-flex justify-content-center text-center" style="height: 25rem;">
            <div class="row h-100 d-inline-block" >
              <div id="carouselExampleIndicators" class="carousel slide h-100 d-flex align-content-center" data-bs-ride="carousel">
                <div class="carousel-indicators">
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active bg-secondary" aria-current="true" aria-label="Slide 1"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" class="bg-secondary" aria-label="Slide 2"></button>
                  <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" class="bg-secondary" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner h-100 d-flex align-content-center align-items-center">
                  <div class="carousel-item active">
                    <img src="https://i.pinimg.com/736x/7a/47/e2/7a47e2f57b55fdb690d26d938033e1ad.jpg" class="mw-100" style="max-height:25rem;" >
                  </div>
                  <div class="carousel-item">
                    <img src="https://i.pinimg.com/564x/68/1b/43/681b43372eea8cb0bbc53cbf5b28140f.jpg" class="mw-100" style="max-height:25rem; max-width: 100%;">
                  </div>
                  <div class="carousel-item">
                    <img src="https://i.pinimg.com/736x/58/e2/0c/58e20c989314367930cdf06106dd3293.jpg" class="mw-100"  style="max-height:25rem;" >
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
            </div>

          </div>

          <br>
          <div class="container mx-auto">

            <!-- <span   th:text="${auction.id}"></span> -->
            <div class="row d-inline-block">
              Məhsul:
              <span class="card-title"  th:text="${auction.lotName}">description</span>
              <br>
            </div>
            <br>

            <div class="row d-inline-block">
              Məhsulun sahibi:
              <span class="card-text" th:id="currentBid" class="" th:text="${user.name}">Current bid</span>
              <br>
            </div>

            <br>
            <div class="row d-inline-block">
              Məhsul sahibinin reytinqi:
              <span class="card-text" th:id="bid_step" th:text="${user.rating}">BidStep</span>
              <br>
            </div>

            <!-- <div class="text-left">
                Reserve price:
                <span class="card-text" th:id="bid_step" th:text="${auction.reservePrice}">Reserve</span>
                <br>
            </div>

            <div class="text-left">
                Auction end time:
                <span class="card-text" th:text="${auction.endDate}">endDate</span>
                <br>
            </div> -->

            <br>
          </div>

        </div>

      </div>
    </div>




    <div class="col-md-5 bg-white border mx-2 rounded-3 d-flex align-items-center justify-content-center shadow" > <!-- Column 2-->


      <div class="mx-3 w-100 my-auto ">

        <div class="h-50 my-3 mx-2">
          <div class="row d-inline-block">
            Məhsulun adı:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.lotName}">Current bid</span>
            <br>
          </div>
          <br>
          <div class="row d-inline-block">
            Məhsul haqqında məlumat: <br>
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.description}">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Doloremque magnam quo, repellendus optio eius, veniam rerum facere aspernatur quisquam assumenda saepe corrupti unde facilis architecto accusantium molestiae doloribus tenetur quia.</span>
            <br>
          </div>
          <br><br>
          <div class="row d-inline-block">
            Auksionun başlama vaxtı:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.startDate}">Current bid</span>
            <br>
          </div>
          <br>
          <div class="row d-inline-block">
            Auksionun bitmə vaxtı:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.endDate}">Current bid</span>
            <br>
          </div>
          <br><br>
          <div class="row d-inline-block">
            Rezerv qiyməti:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.reservePrice}">Current bid</span>
            <br>
          </div>
          <br>
          <div class="row d-inline-block">
            Artım məbləği:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.bidStep}">Current bid</span>
            <br>
          </div>
          <br>
          <div class="row d-inline-block">
            Öndə olan təklif:
            <span class="card-text" th:id="currentBid" class="" th:text="${auction.currentBid}">Current bid</span>
            <br>
          </div>

          <hr>

        </div>
        <div class="d-flex mx-auto justify-content-center">
          <div id="app" hidden></div>



          <span id="countdown" class="timer h-100"></span>

        </div>


        <div class="h-50">


          <br>
          <div class="d-flex mx-auto justify-content-center">
            <button class="w-50 btn btn-success" th:onclick="UserAction()">Təklif et</button>
          </div>
          <br>

          <div class="d-flex mx-auto justify-content-between">
            <button class="w-25 btn btn-primary" th:onclick="buttonClickM()">-</button>
            <!--<input type="text" id="inc" value="0"></input>-->
            <input class="text-center" type="number" step="0.01" id="inc" value="0"></input>
            <button class="w-25 btn btn-primary" th:onclick="buttonClickP()">+</button>
          </div>
        </div>

      </div>
    </div>



    <div class="col-md-3 bg-white border mx-2 rounded-3 shadow h-100" th:if="${auction != null}"> <!-- Column 3-->
      <div class="scrollbox">
        <div th:id="bids" class="row">

          <br>
          <div class="shadow-sm border my-5 d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border my-5  d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border my-5  d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border my-5  d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>
          <br>

          <div class="shadow-sm border d-flex justify-content-between rounded-3">
            <span>bid</span>
            <span>user</span>
            <span>bid time</span>
            <br>
          </div>


          <tr th:each="bid: ${auction.bidHistory}">
            <br>
            <td th:text="${bid.user.username}" />
            <td th:text="${bid.bid}" />
          </tr>
        </div>
      </div>
    </div>


  </div>

  <br>

</div>
</div>


<!--<script src="/js/auctionscripts.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script type="text/javascript" th:src="@{/js/auctionscripts.js}"></script>

<script th:inline="javascript">
  /*<![CDATA[*/

  var imgsJson = /*[[${auction.itemPictures}]]*/ 'default';
  let json = JSON.parse(imgsJson);
  let url = "https://ucarecdn.com/".concat(json[0]).concat("/");
  console.log(url);

  document.getElementById("imgs1").setAttribute("src", url);
  /*]]>*/
</script>

</body>
</html>

